spring:
  application:
    name: com.example.honeycomb.example
  main:
    allow-bean-definition-overriding: true
  cloud:
    compatibility-verifier:
      enabled: false

server:
  port: 8080

service:
  discovery:
    base-url: "http://localhost"

eureka:
  client:
    enabled: false

cell:
  ports:
    InventoryCell: "9091"
    CatalogCell: "9092"
    PricingCell: "9093"
  managementPort:
    InventoryCell: 9191
    CatalogCell: 9192
    PricingCell: 9193

honeycomb:
  # storage:
  #   type: memory
  #   routing:
  #     enabled: true
  #     per-cell:
  #       InventoryCell: redis
  #       CatalogCell: hibernate
  #   hibernate:
  #     enabled: true
  #     url: postgresql://localhost:5432/honeycomb
  #     username: honeycomb
  #     password: honeycomb
  #     annotation-free: true
  # validation:
  #   enabled: true
  #   schema-dir: "schemas"
  # idempotency:
  #   enabled: true
  #   header: "Idempotency-Key"
  #   ttl-seconds: 300
  disabled-operations:
    "__all__":
      - delete
    CatalogCell:
      - update
  webclient:
    connect-timeout-ms: 5000
    response-timeout-ms: 20000
  audit:
    max-entries: 500
  security:
    api-keys:
      enabled: true
      header: "X-API-Key"
      keys:
        admin: "admin-key"
        cell: "cell-key"
      per-cell:
        "*": ["admin-key", "cell-key"]
        PricingCell: ["admin-key"]
    # require-auth: true
    # jwt:
    #   enabled: true
    #   issuer-uri: "https://issuer.example.com/"
    #   jwk-set-uri: "https://issuer.example.com/.well-known/jwks.json"
    #   audience: "honeycomb-api"
    #   roles-claim: "roles"
    #   role-prefix: "ROLE_"
    #   scopes-claim: "scp"
    #   scope-prefix: "SCOPE_"
    #   shared-roles-claim: "shared_roles"
    #   shared-role-prefix: "ROLE_"
    #   default-roles: ["ROLE_USER"]
    #   per-cell-roles:
    #     "*": ["ROLE_USER"]
    #     PricingCell: ["ROLE_ADMIN"]
    #   per-cell-operation-roles:
    #     "*":
    #       read: ["ROLE_USER"]
    #       create: ["ROLE_ADMIN"]
    #   shared-method-roles:
    #     "*": ["ROLE_USER"]
    #     discount: ["ROLE_PRICING"]
    # mtls:
    #   enabled: true
    #   require-client-cert: true
    #   allowed-subjects:
    #     - "CN=honeycomb-client,O=Example Corp,L=NYC,ST=NY,C=US"
  rate-limiter:
    enabled: true
    defaults:
      limit-for-period: 10
      refresh-period: 1s
      timeout: 0ms
    per-cell:
      PricingCell:
        limit-for-period: 5
        refresh-period: 1s
  routing:
    default-policy: "round-robin"
    per-cell-policy:
      "*": "round-robin"
  autoscale:
    enabled: false
    evaluation-interval: 15s
    scale-up-rps: 2.0
    scale-down-rps: 0.0
    per-cell-enabled:
      "*": true

shared:
  caller-header: "X-From-Cell"
  user: "shared"
  password: "changeit"

example:
  oauth2:
    registration-id: ""

actuator:
  user: "admin"
  password: "changeit"

management:
  endpoints:
    web:
      base-path: /honeycomb/actuator
      exposure:
        include: health,info,prometheus,metrics
  endpoint:
    health:
      show-details: when_authorized
      probes:
        enabled: true
  metrics:
    tags:
      application: honeycomb-example

springdoc:
  api-docs:
    path: /honeycomb/api-docs
  swagger-ui:
    path: /honeycomb/swagger-ui.html
    operationsSorter: method
  show-actuator: false
